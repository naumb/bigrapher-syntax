name: "Bigrapher"
scopeName: "source.bigrapher"
patterns:
  - include: "#comments"
  - include: "#keywords"
  - include: "#brs-definition"
  - include: "#operators"
  - include: "#entities"
repository:
  comments:
    patterns:
      - name: comment.line.bigrapher
        begin: "#"
        end: $
  brs-definition:
    patterns:
      - name: meta.block.brs-definition.bigrapher
        begin: "\\b(begin)\\s+(brs)\\b"
        beginCaptures:
          "1":
            name: keyword.control.begin.bigrapher
          "2":
            name: keyword.control.brs.bigrapher
        end: "\\b(end)\\b"
        endCaptures:
          "1":
            name: keyword.control.end.bigrapher
        patterns:
          - name: keyword.control.init.brs.bigrapher
            match: "\\binit\\b"
          - name: keyword.control.rules.brs.bigrapher
            match: "\\brules\\b"
          - name: keyword.control.predicates.brs.bigrapher
            match: "\\bpreds\\b"
          - include: "#comments"
          - include: "#operators"
          - include: "#entities"
  keywords:
    patterns:
      - name: keyword.control.control.bigrapher
        match: "(atomic\\s+)?ctrl"
      - match: "(big)\\s+([a-z][a-zA-Z0-9_-]*)"
        captures: 
          1: 
            name: keyword.control.bigraph-definition.bigrapher
          2:
            name: variable.other.constant.bigraph-name.bigrapher
      - match: "(react)\\s+([a-z][a-zA-Z0-9_-]*)"
        captures: 
          1: 
            name: keyword.control.reaction-rule-definition.bigrapher
          2:
            name: variable.other.constant.reaction-rule-name.bigrapher
  operators:
    patterns:
      - name: keyword.operator.assignment.bigrapher
        match: "\\="
      - name: keyword.operator.merge.bigrapher
        match: "\\|"
      - name: keyword.operator.nesting.bigrapher
        match: "\\."
      - name: keyword.operator.parallel.bigrapher
        match: "\\|\\|"
      - name: keyword.operator.hiding.bigrapher
        match: "\\/"
  entities:
    patterns:
      - name: entity.name.class.control-name.bigrapher
        match: "[A-Z][a-zA-Z0-9_-]*"
      - name: variable.other.readwrite.link-name.bigrapher
        match: "[a-z][a-zA-Z0-9_-]*"